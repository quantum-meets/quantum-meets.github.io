<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" xml:lang="en-GB">

<head>
    <link rel="stylesheet" href="github.css">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <title>Quantum Meets</title>

    <style>
        .markdown-body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
        }

        @media (max-width: 767px) {
            .markdown-body {
                padding: 15px;
            }
        }




        /* --- Toggle Bar --- */
/* --- Scrollable Filter Toggle with Edge Fade --- */
.filter-toggle {
  position: relative;
  display: flex;                  /* ✅ allow proper flex layout */
  background: #e0e0e0;
  border-radius: 999px;
  overflow-x: auto;               /* ✅ enable horizontal scrolling */
  white-space: nowrap;
  -webkit-overflow-scrolling: touch;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  margin: 0.4rem 0;
  scrollbar-width: none;          /* hide scrollbar in Firefox */
  max-width: 100%;                /* ✅ fit mobile width */
}

.filter-toggle::-webkit-scrollbar {
  display: none;                  /* hide scrollbar in Chrome/Safari */
}

.filter-toggle button {
  border: none;
  background: none;
  padding: 0.6rem 1.2rem;
  cursor: pointer;
  font-weight: 500;
  transition: background 0.2s, color 0.2s;
  flex: 0 0 auto;                 /* ✅ prevent buttons from shrinking */
}

.filter-toggle button:hover {
  background: rgba(0, 0, 0, 0.08);
}

.filter-toggle button.active {
  background: #007bff;
  color: #fff;
}

/* Optional: subtle fade hints at edges */
.filter-toggle::before,
.filter-toggle::after {
  content: "";
  position: absolute;
  top: 0;
  width: 1.5rem;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.filter-toggle::before {
  left: 0;
  background: linear-gradient(to right, #ffffff 0%, rgba(255, 255, 255, 0) 100%);
}

.filter-toggle::after {
  right: 0;
  background: linear-gradient(to left, #ffffff 0%, rgba(255, 255, 255, 0) 100%);
}



        /* Make toggle bar scrollable on mobile */
        .filter-toggle {
            display: flex;
            background: #e0e0e0;
            border-radius: 999px;
            overflow-x: auto;
            /* allow horizontal scroll */
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
            /* smooth scrolling on iOS */
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin: 0.4rem 0;
            scrollbar-width: none;
            /* hide scrollbar in Firefox */
        }

        .filter-toggle::-webkit-scrollbar {
            display: none;
            /* hide scrollbar in Chrome/Safari */
        }

        /* .filter-toggle {
            display: inline-flex;
            background: #e0e0e0;
            border-radius: 999px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin: 1rem 0;
        } */

        .filter-toggle button {
            border: none;
            background: none;
            padding: 0.6rem 1.2rem;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.2s, color 0.2s;
        }

        .filter-toggle button:hover {
            background: rgba(0, 0, 0, 0.08);
        }

        .filter-toggle button.active {
            background: #007bff;
            color: #fff;
        }


        /* Hidden events */
        .hidden {
            display: none !important;
        }

        /* optional: visual cue for the wrapper */
        .event {
            margin-bottom: 0.6rem;
            padding: 0.6rem 0.6rem;
            border-radius: 6px;
            /* background: rgba(0,0,0,0.02); */
            /* opacity: 0.9;
      transition: opacity 0.25s ease-in-out, background-color 0.25s ease-in-out; */

        }



        .event-block {
            transition: opacity 0.4s ease, transform 0.4s ease;
            opacity: 1;
            transform: translateY(0);
        }

        .event-block.hidden {
            opacity: 0;
            transform: translateY(10px);
            pointer-events: none;
        }

        /* Add blue accent for Colloquium events */
        .event[data-type="Colloquium"] {
            border-left: 2px solid #007bff;
            padding-left: 0.8rem;
        }

        /* Add grey accent for Seminar events
    .event[data-type="Seminar"] {
    border-left: 1px solid #e0e0e0;
    padding-left: 0.8rem;
    } */

        /* #div_pipeline * {
    background: none !important;
    box-shadow: none !important;
    } */

        /* Subtle hover effect for events in div_pipeline */

        /* .event:hover { */
        /* opacity: 1; */
        /* background-color: rgba(0, 0, 0, 0.03);  */
        /* cursor: default;  */
        /* normal arrow */
        /* } */

        /* .event:hover {
    background-color: rgba(0, 0, 0, 0.04);
    transition: background-color 0.3s ease-in-out;
    } */
    </style>

    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script>
        const darkmode_options = {
            bottom: '32px',
            right: '32px',
            time: '0.3s',
            mixColor: '#fff',
            backgroundColor: '#fff',
            buttonColorDark: '#100f2c',
            buttonColorLight: '#fff',
            saveInCookies: true,
            label: '⚛',
            autoMatchOsTheme: false
        };
        function addDarkmodeWidget() {
            new Darkmode(darkmode_options).showWidget();
        }
        window.addEventListener('load', addDarkmodeWidget);
    </script>

    <script>
        const markdownUrl_qm = "https://raw.githubusercontent.com/quantum-iiit/quantum-iiit.github.io/refs/heads/main/content.md";

        async function loadSection(headingToExtract, contentID, inputUrl = markdownUrl_qm) {
            const res = await fetch(inputUrl);
            const text = await res.text();
            const level = headingToExtract.match(/^#+/)[0].length;
            const regex = new RegExp(`${headingToExtract}[\\s\\S]*?(?=\\n#{1,${level}}\\s|$)`, "i");
            const match = text.match(regex);
            let section = match ? match[0] : "Section not found.";
            section = section.replace(/^.*\n/, "");
            const html = marked.parse(section);
            document.getElementById(contentID).innerHTML += html;
            MathJax.typesetPromise([document.getElementById(contentID)]);
        }
    </script>
</head>

<body class="markdown-body">
    <h1>Quantum Meets</h1>

    <div id="div_about">
        <script>loadSection("## About", "div_about", markdownUrl_qm)</script>
    </div>

    <h2>Calendar</h2>
    <center>
        <iframe
            src="https://calendar.google.com/calendar/embed?height=550&wkst=1&ctz=Asia%2FKolkata&showPrint=0&hl=en_GB&mode=AGENDA&title=Quantum%20Meets&src=YjAyNDI5YjRkZWQ5Yzc2YTFlNWU2OTE2MjFkOWRhOTI2M2QzMzkzZDU1ZWZiYTc3MDg2ZjhiNjg4NDcwZDU4OUBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%238e24aa"
            style="border: 0; padding: 0px; width: 90%; height: 550px;" frameborder="0" scrolling="no"></iframe>
    </center>
    <br />

    <h2>Upcoming</h2>

    <div id="div_upcoming">
        <script>loadSection("## Upcoming", "div_upcoming", markdownUrl_qm)</script>
    </div>

    <h2>Pipeline</h2>

    <!-- Filter Toggle (controls Pipeline events) -->
    <div class="filter-toggle">
        <button data-filter="all">All</button>
        <button data-filter="Colloquium">Colloquia</button>
        <button data-filter="Seminar">Seminars</button>
        <button class="active" data-filter="Seminar,Colloquium">Colloquia/Seminars</button>
        <button data-filter="Talk">Talks</button>
    </div>

    <div id="div_pipeline">
        <script>loadSection("## Pipeline", "div_pipeline", markdownUrl_qm)</script>
    </div>

    <h2>Past</h2>

    <div id="div_past">
        <script>loadSection("## Past", "div_past", markdownUrl_qm)</script>
    </div>


    <script>
            (function () {
                const buttons = document.querySelectorAll('.filter-toggle button');
                const normalize = s => (s || "").replace(/\s+/g, ' ').trim();
                const headingRegex = /Quantum\s*(Seminar|Talk|Colloquium)/i;

                function setupEventFiltering(containerId) {
                    const container = document.getElementById(containerId);
                    if (!container) return;

                    function wrapEvents() {
                        if (container.querySelector('.event')) return;

                        const children = Array.from(container.childNodes);
                        for (let i = 0; i < children.length; i++) {
                            const node = children[i];
                            if (!node || node.nodeType !== Node.ELEMENT_NODE) continue;

                            const tag = node.tagName.toUpperCase();
                            if (tag === 'H2' || tag === 'H3') {
                                const title = normalize(node.textContent);
                                const match = title.match(headingRegex);
                                if (match) {
                                    const type = match[1].charAt(0).toUpperCase() + match[1].slice(1).toLowerCase();

                                    const wrapper = document.createElement('div');
                                    wrapper.classList.add('event');
                                    wrapper.setAttribute('data-type', type);

                                    let current = node;
                                    while (current) {
                                        const next = current.nextSibling;
                                        wrapper.appendChild(current);
                                        if (next && next.nodeType === Node.ELEMENT_NODE) {
                                            const nextTag = next.tagName.toUpperCase();
                                            if (nextTag === 'H2' || nextTag === 'H3') break;
                                        }
                                        current = next;
                                    }

                                    let ref = null;
                                    for (let j = i + 1; j < children.length; j++) {
                                        if (children[j] && children[j].parentNode === container) {
                                            ref = children[j];
                                            break;
                                        }
                                    }
                                    container.insertBefore(wrapper, ref);
                                }
                            }
                        }
                    }

                    // function applyFilter(filter) {
                    // const filters = filter.toLowerCase().split(',').map(f => f.trim());
                    // const events = document.querySelectorAll('#div_pipeline h3');

                    // events.forEach(event => {
                    //     const title = event.textContent || "";
                    //     const match = title.match(/Quantum\s+(Seminar|Talk|Colloquium)/i);
                    //     const type = match ? match[1] : "";

                    //     const contentBlock = document.createElement('div');
                    //     contentBlock.className = 'event-block';
                    //     event.parentNode.insertBefore(contentBlock, event);
                    //     contentBlock.appendChild(event);

                    //     // Include following siblings until next h2/h3
                    //     let next = event.nextElementSibling;
                    //     while (next && !/^H[23]$/.test(next.tagName)) {
                    //     const temp = next.nextElementSibling;
                    //     contentBlock.appendChild(next);
                    //     next = temp;
                    //     }

                    //     const show = filters.includes('all') || filters.includes(type.toLowerCase());
                    //     contentBlock.classList.toggle('hidden', !show);
                    // });
                    // }

                    function applyFilter(filter) {
                        const events = container.querySelectorAll('.event');
                        events.forEach(ev => {
                            const type = ev.getAttribute('data-type') || '';
                            const filters = filter.toLowerCase().split(',').map(f => f.trim());
                            const show = filters.includes('all') || filters.includes(type.toLowerCase());
                            // const show = (filter === 'all') || (type.toLowerCase() === filter.toLowerCase());
                            ev.classList.toggle('hidden', !show);
                        });
                    }

                    const observer = new MutationObserver((mutations, obs) => {
                        const hasChildElements = Array.from(container.childNodes).some(n => n.nodeType === Node.ELEMENT_NODE);
                        if (!hasChildElements) return;

                        wrapEvents();
                        applyFilter(document.querySelector('.filter-toggle button.active')?.dataset.filter || 'all');
                        obs.disconnect();
                    });
                    observer.observe(container, { childList: true, subtree: true });

                    // Safety delay in case observer misses load
                    window.addEventListener('load', () => {
                        setTimeout(() => {
                            wrapEvents();
                            applyFilter(document.querySelector('.filter-toggle button.active')?.dataset.filter || 'all');
                        }, 600);
                    });

                    return applyFilter; // expose function
                }

                // Initialize both Pipeline and Past
                const applyFilterPipeline = setupEventFiltering('div_pipeline');
                //   const applyFilterPast = setupEventFiltering('div_past');

                // Shared button handlers
                buttons.forEach(btn => {
                    if (btn._hasHandler) return;
                    btn._hasHandler = true;
                    btn.addEventListener('click', () => {
                        buttons.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        const filter = btn.dataset.filter || 'all';
                        if (applyFilterPipeline) applyFilterPipeline(filter);
                        if (applyFilterPast) applyFilterPast(filter);
                    });
                });

                // Wait for the Markdown to finish rendering, then apply the default filter
                window.addEventListener('load', () => {
                    // Try once initially, then again after a short delay (in case markdown took time)
                    const defaultFilter = 'Seminar,Colloquium';
                    const tryApplyDefault = () => {
                        const btn = document.querySelector(`.filter-toggle button[data-filter="${defaultFilter}"]`);
                        if (btn) {
                            btn.classList.add('active');
                            applyFilter(defaultFilter);
                        }
                    };
                    tryApplyDefault();
                    setTimeout(tryApplyDefault, 1000); // second attempt after markdown loads
                });
            })();
    </script>

</body>

</html>